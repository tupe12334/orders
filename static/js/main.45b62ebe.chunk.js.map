{"version":3,"sources":["assets/MyTheme.js","services/ITMToWGS84.js","services/GovMapsAPI.js","services/firebase.js","components/OrderInputForum.js","services/cityList.js","services/StreetsList.js","components/orders/OneOrder.js","services/nominatim.js","components/orders/OrderShow.js","pages/Routes.js","pages/Home.js","services/GovMaps.js","pages/OrderPlace.js","pages/Show.js","pages/Error.js","components/Body.js","components/Menu.js","components/NavBar.js","App.js","serviceWorker.js","index.js"],"names":["MyTheme","createMuiTheme","direction","ITM","govmap","mapIframeId","mapUrl","urlWithProtocol","protocol","restBaseUrl","routingBaseUrl","mapLoaded","$","Deferred","authData","api_token","user_token","domain","token","mapFreeToProcess","resolve","bMapReceiverAttached","pOnError","authenticated","dictApiCallStatus","aApiCallDelegate","clickBinded","dictSelectFeatures","transportation","startDepartureTime","endDepartureTime","numberOfDaysToAdd","events","PAN","EXTENT_CHANGE","CLICK","DOUBLE_CLICK","MOUSE_MOVE","MOUSE_OVER","internalClickEvents","GET_XY_CLICK","SELECTION","locateType","addressToLotParcel","lotParcelToAddress","cursorType","DEFAULT","TARGET","POLYGON","CIRCLE","RECTANGLE","SELECT_FEATURES","geometryType","POINT","POLYLINE","LINE","drawType","Point","Polyline","Polygon","Circle","Rectangle","FreehandPolygon","rendererType","Simple","SimplePicture","JenksNaturalBreaks","EqualInterval","Quantile","ClassBreaks","geocodeType","FullResult","AccuracyOnly","saveAction","Delete","Update","New","saveActionStatus","Failed","Deleted","Updated","Inserted","costing","auto","auto_shorter","bicycle","multimodal","pedestrian","routing_type","locate","routing","elevation","time_distance_matrix","optimized_route","isochrone","transit_available","getRoutingServiceRoot","this","getProtocol","getRestServiceRoot","getScriptHostUrl","scripts","document","getElementsByTagName","i","length","src","toLowerCase","indexOf","getSchema","charLength","fromPosition","substr","toPosition","postMapRequest","oRequest","headers","auth_data","JSON","stringify","getMapIframeWindow","postMessage","post","url","data","ajax","processData","dataType","type","fail","e","status","console","log","postError","getMapIframeId","getElementById","contentWindow","iframes","id","getUrlWithProtocol","getRequestId","requestType","requestId","Date","getTime","setTimeout","checkProcessStatus","hasOwnProperty","addDelegateToQueue","requestParams","eventId","hasPromise","doProcess","when","validJSON","json","test","replace","errObj","onErrorCallback","onError","authenticatedUser","promise","getMapRequest","request","bContinuous","event","extend","then","resolvePromise","bNotify","notify","isFunction","func","validBackground","bg","isNaN","createMap","targetDiv","options","optionalParameters","queryParams","Array","push","progress","onEvent","pipe","onLoad","setToken","visibleLayers","join","layers","showXY","bgButton","showBubble","zoomButtons","background","identifyOnClick","level","q","center","x","y","isEmbeddedToggle","setMapMarker","layersMode","language","transDate","transDepartureTime","transRouteId","transTripId","stationId","bubbleMaxWidth","oTargetDiv","iMap","createElement","style","setAttribute","innerHTML","appendChild","setAuthData","result","updateAuthData","message_receiver","originalEvent","origin","response","parse","error","context","continousMode","unbindEvent","saveLayerEntities","params","entity","setLayerOpacity","showLabels","getLayerEntities","getAddEntitiesSample","refreshResource","intersectFeatures","getLayerDef","layerDef","whereClause","intersectFeaturesByWhereClause","layerName","now","Math","random","toString","searchAndLocate","setBackground","backgroundId","setMapCursor","cursor","setDefaultTool","showMeasure","showPrint","height","width","showExportMap","closeBubble","draw","displayGeometries","clearSelection","clearDrawings","clearGeometriesByName","names","clearGeometriesById","ids","zoomToXY","clearMapMarker","getXY","geocode","getFreeSearchResult","setDrawPointTooltip","gpsOn","gpsOff","getGPSLocation","setGpsMarker","gpsdata","accuracy","removeGPSMarker","getInScaleVisibleLayers","identifyByXY","getMapTolerance","tolerance","oLayers","setVisibleLayers","layersOn","layersOff","setHeatLayer","points","removeHeatLayer","changeHeatLayerValueField","valueField","getLayerData","LayerName","Radius","getLayerRenderer","getResourceLayersInfo","resourceName","addCustomBackground","addAuthorizedBackground","bgId","pointerThis","getLegend","addOpenSourceLayer","searchInLayer","_this","fieldName","fieldValues","interfaceName","setMapSelection","intersectFeaturesLongGeom","_selectFeatures","wkt","continous","defer","Values","key","lstObj","returnValues","k","substring","SelectionParams","filter","selection","limited","limitedResult","err","toWKT","geometry","_extentToWKT","_pointToWKT","_polylineToWKT","_polygonToWKT","path","paths","pntCount","sb","toFixed","idx","ring","rings","xmin","ymin","xmax","ymax","selectFeaturesOnMap","zoomToDrawing","filterLayers","zoomToExtent","zoomIn","zoomOut","openTransporatationApp","findLine","getSpecificLine","getStationArrivalTimes","StartDate","dateFormat","StartDepartureTime","EndDate","dateArray","split","startDate","endDate","setDate","getDate","EndDepartureTime","zoomToTransportationLine","date","dd","mm","getMonth","getFullYear","projLocations","locations","getLocationsFromAdresses","addresses","getLocations","adresses","getRoutingData","getJSON","routes","getSearchItem","getSearchComponentValues","predefinedsearch","window","on","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","db","database","OrderInputForum","cityListO","useState","streetList","setStreetList","streetListO","setStreetListO","cityList","setCityList","citySelected","setCitySelected","initialValues","orderSetDate","reciverName","city","street","house","lat","lng","useEffect","setArrayInState","success","find","each","cityNameOBJ","textContent","trim","getCityList","map","option","firstLetter","toUpperCase","title","undefined","Typography","color","variant","onSubmit","setSubmitting","resetForm","DDdate","String","padStart","MMdate","YYdate","MMtime","getMinutes","HHtime","getHours","SStime","getSeconds","fulladdress","Nominatim","search","opts","results","ref","sendTextToFireBase","validateSchema","object","number","min","values","isSubmitting","setFieldValue","handleChange","FormControl","margin","required","label","name","component","TF","Autocomplete","getOptionLabel","groupBy","onChange","value","resource_id","limit","fields","sort","StreetsList","records","forEach","includes","שם_ישוב","שם_רחוב","getStreets","noOptionsText","renderInput","TextField","loadingText","Button","disabled","endIcon","Icon","transform","CircularProgress","size","OneOrder","props","position","setposition","setPostionInState","checkIfAddressGood","latLng","attr","xhr","getGeoCoding","address","Card","CardHeader","rcivername","subheader","CardContent","Map","zoom","TileLayer","attribution","Marker","Popup","ordersRef","OrderShow","ordersViewToShow","setordersViewToShow","snap","temp","val","temp2","Object","entries","order","thisOrder","dateformat","Grid","counter","item","xs","container","spacing","justify","Routes","sidebarName","ITMCor","WGS84FromITM","proj4","ITMToWGS84","keyword","icon","Home","Body","prop","exact","Error","Menu","display","textAlign","fontSize","Divider","List","MenuList","to","textDecoration","MenuItem","selected","routeName","location","pathname","ListItemIcon","ListItemText","primary","NavBar","React","menuDrawerState","setMenuDrawerState","toggleDrawer","open","AppBar","Toolbar","IconButton","edge","aria-label","onClick","Drawer","onClose","role","onKeyDown","fontWeight","jss","create","plugins","jssPreset","rtl","App","ThemeProvider","theme","StylesProvider","className","dir","Boolean","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.45b62ebe.chunk.js","sourcesContent":["import {createMuiTheme} from '@material-ui/core/styles'\r\n\r\n\r\nconst MyTheme = createMuiTheme({\r\n    direction: 'rtl',\r\n    \r\n  });\r\n\r\n  export default  MyTheme","import proj4 from 'proj4';\r\n\r\n// Origin Point\r\nconst lon_0 = 35.20451694444444 // central_meridian\r\nconst lat_0 =  31.734393611111113 // latitude_of_origin\r\n// False Origin\r\nconst y_0 = 626907.390 // false_northing\r\nconst x_0 = 219529.584 // false_easting\r\nconst k_0 = 1.0000067 // scale_factor\r\n\r\nvar ITM = `PROJCS[\"ITM\", GEOGCS[\"ITM\", DATUM[\"Isreal 1993\", SPHEROID[\"GRS 1980\", 6378137, 298.257222101, AUTHORITY[\"EPSG\", \"7019\"]], TOWGS84[-24.0024, -17.1032, -17.8444, -0.33077, -1.85269, 1.66969, 5.4248]], PRIMEM[\"Greenwich\", 0, AUTHORITY[\"EPSG\", \"8901\"]], UNIT[\"degree\", 0.017453292519943295, AUTHORITY[\"EPSG\", \"9102\"]], AXIS[\"East\", EAST], AXIS[\"North\", NORTH]], UNIT[\"metre\", 1, AUTHORITY[\"EPSG\", \"9001\"]], PROJECTION[\"Transverse_Mercator\"], PARAMETER[\"latitude_of_origin\", ${lat_0}], PARAMETER[\"central_meridian\", ${lon_0}], PARAMETER[\"false_northing\", ${y_0}], PARAMETER[\"false_easting\", ${x_0}], PARAMETER[\"scale_factor\", ${k_0}], AXIS[\"East\", EAST], AXIS[\"North\", NORTH]]`\r\nexport default function ITMToWGS84(ITMCor=[210727,745742]) {\r\n  //console.log(ITMCor);\r\n  var WGS84FromITM = proj4(ITM /*from*/, 'WGS84' /*to*/ ,ITMCor)\r\n  //console.log(WGS84FromITM);\r\n  return WGS84FromITM\r\n}","import $ from 'jquery';\r\n\r\nexport var govmap = {\r\n    mapIframeId: \"\",\r\n    mapUrl: \"\",\r\n    urlWithProtocol: \"\",\r\n    protocol: \"\",\r\n    restBaseUrl: \"ags.govmap.gov.il\",\r\n    routingBaseUrl: \"13.73.176.212:8080\",\r\n    mapLoaded: $.Deferred(),\r\n    authData: {\r\n        api_token: '',\r\n        user_token: '',\r\n        domain: '',\r\n        token: ''\r\n    },\r\n    mapFreeToProcess: $.Deferred().resolve(),\r\n    bMapReceiverAttached: $.Deferred(),\r\n    pOnError: $.Deferred(),\r\n    authenticated: $.Deferred(),\r\n    dictApiCallStatus: {},\r\n    aApiCallDelegate: {},\r\n    clickBinded: false,\r\n    dictSelectFeatures: [],\r\n    transportation: {\r\n        startDepartureTime: \"00:00\",\r\n        endDepartureTime: \"23:59\",\r\n        numberOfDaysToAdd: 7\r\n    },\r\n    events: {\r\n        PAN: 0,\r\n        EXTENT_CHANGE: 1,\r\n        CLICK: 3,\r\n        DOUBLE_CLICK: 4,\r\n        MOUSE_MOVE: 5,\r\n        MOUSE_OVER: 8\r\n    },\r\n    internalClickEvents: {\r\n        GET_XY_CLICK: 10,\r\n        SELECTION: 11\r\n    },\r\n    locateType: {\r\n        addressToLotParcel: 1,\r\n        lotParcelToAddress: 0\r\n    },\r\n    cursorType: {\r\n        DEFAULT: 0,\r\n        TARGET: 1,\r\n        POLYGON: 3,\r\n        CIRCLE: 4,\r\n        RECTANGLE: 5,\r\n        SELECT_FEATURES: 6\r\n    },\r\n    geometryType: {\r\n        POINT: 0,\r\n        POLYLINE: 1,\r\n        POLYGON: 2,\r\n        LINE: 3,\r\n        CIRCLE: 4\r\n    },\r\n    drawType: {\r\n        Point: 0,\r\n        Polyline: 1,\r\n        Polygon: 2,\r\n        Circle: 3,\r\n        Rectangle: 4,\r\n        FreehandPolygon: 6\r\n    },\r\n    rendererType: {\r\n        Simple: 0,\r\n        SimplePicture: 1,\r\n        JenksNaturalBreaks: 2,\r\n        EqualInterval: 3,\r\n        Quantile: 4,\r\n        ClassBreaks: 5\r\n    },\r\n    geocodeType: {\r\n        FullResult: 0,\r\n        AccuracyOnly: 1\r\n    },\r\n    saveAction: {\r\n        Delete: 1,\r\n        Update: 2,\r\n        New: 3\r\n    },\r\n    saveActionStatus: {\r\n        Failed: 0,\r\n        Deleted: 1,\r\n        Updated: 2,\r\n        Inserted: 3\r\n    },\r\n    costing: {\r\n        auto: \"auto\",\r\n        auto_shorter: \"auto_shorter\",\r\n        bicycle: \"bicycle\",\r\n        multimodal: \"multimodal\",\r\n        pedestrian: \"pedestrian\"\r\n    },\r\n    routing_type: {\r\n        locate: \"locate\",\r\n        routing: \"route\",\r\n        elevation: \"height\",\r\n        time_distance_matrix: \"sources_to_targets\",\r\n        optimized_route: \"optimized_route\",\r\n        isochrone: \"isochrone\",\r\n        transit_available: \"transit_available\"\r\n    },\r\n    getRoutingServiceRoot: function () {\r\n        return this.getProtocol() + govmap.routingBaseUrl;\r\n    },\r\n    getRestServiceRoot: function () {\r\n        return this.getProtocol() + govmap.restBaseUrl;\r\n    },\r\n    getScriptHostUrl: function () {\r\n        var scripts = document.getElementsByTagName('script');\r\n        for (var i = 0; i < scripts.length; i++) {\r\n            if (scripts[i].src == null)\r\n                continue;\r\n            var src = scripts[i].src.toLowerCase();\r\n            if (src.indexOf(\"govmap.api.js\") == -1)\r\n                continue;\r\n            this.protocol = this.getSchema(src);\r\n            var charLength = src.indexOf(\"govmap/api\");\r\n            var fromPosition = src.indexOf(\"://\") + 3;\r\n            return src.substr(fromPosition, charLength - fromPosition);\r\n        }\r\n        return \"\";\r\n    },\r\n    getSchema: function (src) {\r\n        var toPosition = src.indexOf(\"://\");\r\n        return src.substr(0, toPosition + 3);\r\n    },\r\n    postMapRequest: function (oRequest) {\r\n        this.mapFreeToProcess = $.Deferred();\r\n        oRequest.headers = { auth_data: JSON.stringify(govmap.authData) };\r\n        this.getMapIframeWindow().postMessage(JSON.stringify(oRequest), '*');\r\n    },\r\n    post: function (url, data) {\r\n        data = data || {};\r\n        return $.ajax({\r\n            url: url,\r\n            headers: { auth_data: JSON.stringify(govmap.authData), \"Content-Type\": \"application/json; charset=utf-8\" },\r\n            data: JSON.stringify(data),\r\n            processData: true,\r\n            dataType: \"json\",\r\n            type: 'POST'\r\n        }).fail(function (e) {\r\n            if (e && e.status && e.status == 401) {\r\n                console.log('Govmap API Token invalid or expired! ');\r\n            }\r\n            govmap.postError({\r\n                \"title\": \"׳׳™׳¨׳¢׳” ׳©׳’׳™׳׳”\",\r\n                \"description\": \"׳׳™׳¨׳¢׳” ׳©׳’׳™׳׳”. ׳–׳׳ ׳™׳×, ׳׳ ׳ ׳™׳×׳ ׳׳‘׳¦׳¢ ׳׳× ׳”׳₪׳¢׳•׳׳” ׳”׳׳‘׳•׳§׳©׳×.\",\r\n                \"errorCode\": -1\r\n            });\r\n        });\r\n    },\r\n    getMapIframeWindow: function () {\r\n        if (this.mapIframeId == \"\") {\r\n            this.mapIframeId = this.getMapIframeId();\r\n        }\r\n        return document.getElementById(this.mapIframeId).contentWindow;\r\n    },\r\n    getMapIframeId: function () {\r\n        var mapUrl = this.urlWithProtocol + \"/map.html\";\r\n        var iframes = document.getElementsByTagName('iframe');\r\n        for (var i = 0; i < iframes.length; i++) {\r\n            var src = iframes[i].src.toLowerCase();\r\n            if (src.indexOf(mapUrl) == -1)\r\n                continue;\r\n            return iframes[i].id;\r\n        }\r\n        return \"\";\r\n    },\r\n    getUrlWithProtocol: function () {\r\n        return this.getProtocol() + this.mapUrl;\r\n    },\r\n    getProtocol: function () {\r\n        return this.protocol;\r\n    },\r\n    getRequestId: function (requestType) {\r\n        var requestId = requestType + (new Date).getTime();\r\n        this.dictApiCallStatus[requestId] = true;\r\n        setTimeout(function () { govmap.checkProcessStatus(requestId); }, 10000);\r\n        return requestId;\r\n    },\r\n    checkProcessStatus: function (requestId) {\r\n        if (this.dictApiCallStatus.hasOwnProperty(requestId) &&\r\n            this.dictApiCallStatus[requestId] == true) {\r\n            this.mapFreeToProcess.resolve();\r\n            delete this.dictApiCallStatus[requestId];\r\n        }\r\n    },\r\n    addDelegateToQueue: function (requestParams) {\r\n        var requestId = requestParams.requestId;\r\n        if ('eventId' in requestParams)\r\n            requestId = requestParams.eventId;\r\n        this.aApiCallDelegate[requestId] = $.Deferred();\r\n        return this.aApiCallDelegate[requestId];\r\n    },\r\n    hasPromise: function (requestId) {\r\n        return (requestId in this.aApiCallDelegate);\r\n    },\r\n    doProcess: function () {\r\n        return $.when(this.mapFreeToProcess, this.mapLoaded, this.bMapReceiverAttached);\r\n    },\r\n    validJSON: function (json) {\r\n        return (/^[\\],:{}\\s]*$/.test(json.replace(/\\\\[\"\\\\\\/bfnrtu]/g, '@').\r\n            replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']').\r\n            replace(/(?:^|:|,)(?:\\s*\\[)+/g, '')));\r\n    },\r\n    postError: function (errObj) {\r\n        if (this.onErrorCallback != null) {\r\n            try {\r\n                this.onErrorCallback(errObj);\r\n            }\r\n            catch (e) { }\r\n        }\r\n    },\r\n    onError: function () {\r\n        return govmap.pOnError;\r\n    },\r\n    authenticatedUser: function () {\r\n        return govmap.authenticated.promise();\r\n    },\r\n    getMapRequest: function (request, bContinuous) {\r\n        if (request.requestType == 'onEvent' ||\r\n            request.requestType == 'unbindEvent') {\r\n            switch (request.event) {\r\n                case govmap.internalClickEvents.GET_XY_CLICK:\r\n                    $.extend(request, {\r\n                        \"eventId\": 'onEvent' + govmap.events.CLICK\r\n                    });\r\n                    request.event = govmap.events.CLICK;\r\n                    break;\r\n                case govmap.internalClickEvents.SELECTION:\r\n                    $.extend(request, {\r\n                        \"eventId\": 'onEvent' + govmap.events.CLICK\r\n                    });\r\n                    request.event = govmap.events.CLICK;\r\n                    break;\r\n                default:\r\n                    $.extend(request, {\r\n                        \"eventId\": 'onEvent' + request.event\r\n                    });\r\n            }\r\n        }\r\n        $.extend(request, {\r\n            \"requestId\": (bContinuous) ? request.requestType : this.getRequestId(request.requestType)\r\n        });\r\n        return $.when(this.doProcess())\r\n            .then(function () {\r\n            return $.when(govmap.addDelegateToQueue(request), govmap.postMapRequest(request));\r\n        });\r\n    },\r\n    resolvePromise: function (requestId, data, bNotify) {\r\n        if (requestId in govmap.aApiCallDelegate) {\r\n            if (!bNotify) {\r\n                govmap.aApiCallDelegate[requestId].resolve(data);\r\n                delete govmap.aApiCallDelegate[requestId];\r\n            }\r\n            else {\r\n                govmap.aApiCallDelegate[requestId].notify(data);\r\n            }\r\n        }\r\n    },\r\n    isFunction: function (func) {\r\n        return (func && typeof func == 'function');\r\n    },\r\n    validBackground: function (bg) {\r\n        return !isNaN(bg);\r\n    },\r\n    createMap: function (targetDiv, options) {\r\n        var optionalParameters = {};\r\n        var queryString = \"?\";\r\n        var queryParams = new Array();\r\n        queryParams.push(\"MapMode=1\");\r\n        queryParams.push(\"showNavBtn=0\");\r\n        queryParams.push(\"showBackBtn=0\");\r\n        if (typeof (options) == \"object\") {\r\n            if (this.isFunction(options[\"onError\"])) {\r\n                govmap.pOnError.progress(function (e) {\r\n                    options[\"onError\"](e);\r\n                });\r\n            }\r\n            if (this.isFunction(options[\"onClick\"])) {\r\n                this.onEvent(govmap.events.CLICK).progress(function (e) {\r\n                    options[\"onClick\"](e);\r\n                });\r\n            }\r\n            if (this.isFunction(options[\"onPan\"])) {\r\n                this.onEvent(govmap.events.PAN).progress(function (e) {\r\n                    options[\"onPan\"](e);\r\n                });\r\n            }\r\n            if (this.isFunction(options[\"onLoad\"])) {\r\n                govmap.mapLoaded.pipe(function () {\r\n                    options.onLoad();\r\n                });\r\n            }\r\n            this.setToken(options[\"token\"] || \"\", options[\"user_token\"] || \"\");\r\n            if (\"token\" in options) {\r\n                queryParams.push(\"api_token=\" + (options.token));\r\n            }\r\n            queryParams.push(\"parentHost=\" + document.domain);\r\n            if (\"visibleLayers\" in options && options.visibleLayers.length > 0) {\r\n                var visibleLayers = \"lay=\";\r\n                visibleLayers += options.visibleLayers.join(\",\");\r\n                queryParams.push(visibleLayers);\r\n            }\r\n            if (\"layers\" in options && options.layers.length) {\r\n                var layers = \"laym=\";\r\n                layers += options.layers.join(\",\");\r\n                queryParams.push(layers);\r\n            }\r\n            if (\"showXY\" in options) {\r\n                queryParams.push(\"xy=\" + ((options.showXY) ? \"1\" : \"0\"));\r\n            }\r\n            if (\"bgButton\" in options) {\r\n                queryParams.push(\"bb=\" + ((options.bgButton) ? \"1\" : \"0\"));\r\n            }\r\n            if (\"showBubble\" in options) {\r\n                queryParams.push(\"sbs=\" + ((options.showBubble) ? \"1\" : \"0\"));\r\n            }\r\n            if (\"zoomButtons\" in options) {\r\n                queryParams.push(\"zb=\" + ((options.zoomButtons) ? \"1\" : \"0\"));\r\n            }\r\n            if (\"background\" in options) {\r\n                if (govmap.validBackground(options.background)) {\r\n                    queryParams.push(\"b=\" + options.background);\r\n                    optionalParameters[\"b\"] = true;\r\n                }\r\n            }\r\n            if (\"identifyOnClick\" in options) {\r\n                queryParams.push(\"in=\" + ((options.identifyOnClick) ? \"1\" : \"0\"));\r\n            }\r\n            if (\"level\" in options) {\r\n                if (options.level >= 0 && options.level < 11)\r\n                    queryParams.push(\"z=\" + options.level);\r\n            }\r\n            if (\"q\" in options) {\r\n                console.log(\"q in options. push to queryParams\");\r\n                queryParams.push(\"q=\" + options.q);\r\n            }\r\n            if (\"center\" in options &&\r\n                \"x\" in options.center &&\r\n                \"y\" in options.center) {\r\n                queryParams.push(\"c=\" + options.center.x + \",\" + options.center.y);\r\n            }\r\n            if (\"isEmbeddedToggle\" in options) {\r\n                queryParams.push(\"et=\" + ((options.isEmbeddedToggle) ? \"1\" : \"0\"));\r\n            }\r\n            if (\"setMapMarker\" in options) {\r\n                queryParams.push(\"mk=\" + ((options.setMapMarker) ? \"1\" : \"0\"));\r\n            }\r\n            if (\"layersMode\" in options) {\r\n                queryParams.push(\"lm=\" + (options.layersMode));\r\n            }\r\n            if (\"language\" in options) {\r\n                queryParams.push(\"lang=\" + (options.language));\r\n            }\r\n            if (\"transDate\" in options) {\r\n                queryParams.push(\"date=\" + (options.transDate));\r\n            }\r\n            if (\"transDepartureTime\" in options) {\r\n                queryParams.push(\"dt=\" + (options.transDepartureTime));\r\n            }\r\n            if (\"transRouteId\" in options) {\r\n                queryParams.push(\"ld=\" + (options.transRouteId));\r\n            }\r\n            if (\"transTripId\" in options) {\r\n                queryParams.push(\"ti=\" + (options.transTripId));\r\n            }\r\n            if (\"stationId\" in options) {\r\n                queryParams.push(\"stationId=\" + (options.stationId));\r\n            }\r\n            if (\"bubbleMaxWidth\" in options) {\r\n                queryParams.push(\"bmw=\" + (options.bubbleMaxWidth));\r\n            }\r\n        }\r\n        if (!(\"b\" in optionalParameters))\r\n            queryParams.push(\"b=0\");\r\n        var oTargetDiv = document.getElementById(targetDiv);\r\n        var iMap = document.createElement(\"iframe\");\r\n        iMap.id = \"ifrMap\";\r\n        iMap.style[\"width\"] = \"100%\";\r\n        iMap.style[\"height\"] = \"100%\";\r\n        iMap.style[\"border\"] = \"none\";\r\n        iMap.setAttribute(\"src\", (this.urlWithProtocol + \"/map.html\") + ((queryParams.length > 0) ? ((\"?\") + queryParams.join(\"&\")) : \"\"));\r\n        oTargetDiv.innerHTML = \"\";\r\n        oTargetDiv.appendChild(iMap);\r\n    },\r\n    setAuthData: function (data) {\r\n        this.authData = data;\r\n        this.authenticated = govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/Auth\", {}).then(function (result) {\r\n            if (result) {\r\n                govmap.authData = result;\r\n                govmap.updateAuthData(result);\r\n            }\r\n        });\r\n        return this.authenticated;\r\n    },\r\n    message_receiver: function (e) {\r\n        e = e.originalEvent;\r\n        if (govmap.urlWithProtocol.indexOf(e.origin) == 0) {\r\n            if (!govmap.validJSON(e.data))\r\n                return;\r\n            var response = JSON.parse(e.data);\r\n            if (\"error\" in response) {\r\n                if (response.error != null && response.error.length > 0) {\r\n                    govmap.pOnError.notify(response.error);\r\n                }\r\n            }\r\n            var bNotify = false;\r\n            switch (response.context) {\r\n                case \"map_loaded\":\r\n                    govmap.mapLoaded.resolve();\r\n                    break;\r\n\t\t\t\tcase \"displayGeometries\":\r\n                   bNotify = true;\r\n                    break;\r\n                case \"message_receiver_attached\":\r\n                    govmap.bMapReceiverAttached.resolve();\r\n                    break;\r\n                case \"request_processed\":\r\n                    govmap.checkProcessStatus(response.data.requestId);\r\n                    govmap.mapFreeToProcess.resolve();\r\n                    break;\r\n                case \"onEvent\":\r\n                    bNotify = true;\r\n                    response.requestId = response.eventId;\r\n                    break;\r\n                case \"draw\":\r\n                    bNotify = (\"notify\" in response.data) ? response.data.notify : true;\r\n                    response.requestId = response.context;\r\n                    break;\r\n                case \"selectFeaturesOnMap\":\r\n                    break;\r\n            }\r\n            govmap.resolvePromise(response.requestId, response.data, bNotify);\r\n        }\r\n    },\r\n    setToken: function (token, user_token) {\r\n        govmap.authData[\"api_token\"] = token;\r\n        govmap.authData[\"user_token\"] = user_token;\r\n        govmap.authenticated = $.Deferred();\r\n        govmap.setAuthData(govmap.authData);\r\n    },\r\n    onEvent: function (event, continousMode) {\r\n        if (continousMode === void 0) { continousMode = true; }\r\n        var requestType = 'onEvent';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'event': event\r\n        };\r\n        return this.getMapRequest(request, continousMode);\r\n    },\r\n    unbindEvent: function (event) {\r\n        var requestType = 'unbindEvent';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'event': event\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    saveLayerEntities: function (params) {\r\n        return govmap.authenticatedUser().then(function () {\r\n            if (\"entities\" in params) {\r\n                for (var i = 0; i < params[\"entities\"].length; i++) {\r\n                    var entity = params[\"entities\"][i];\r\n                    if (\"fields\" in entity)\r\n                        entity[\"fields\"] = JSON.stringify(entity[\"fields\"]);\r\n                }\r\n            }\r\n            return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/SaveLayerEntities\", params);\r\n        });\r\n    },\r\n    setLayerOpacity: function (params) {\r\n        if (!('layerName' in params) ||\r\n            !('opacity' in params))\r\n            return;\r\n        var requestType = 'setLayerOpacity';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'params': params\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    showLabels: function (params) {\r\n        if (!('layerName' in params) ||\r\n            !('showLabels' in params))\r\n            return;\r\n        var requestType = 'showLabels';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'params': params\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    getLayerEntities: function (params) {\r\n        return govmap.authenticatedUser().then(function () {\r\n            return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/GetUserLayerEntities\", params);\r\n        });\r\n    },\r\n    getAddEntitiesSample: function (params) {\r\n        return govmap.authenticatedUser().then(function () {\r\n            return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/GetAddEntitiesSample\", params);\r\n        });\r\n    },\r\n    refreshResource: function (params) {\r\n        if (!('resource' in params) &&\r\n            !('layerName' in params))\r\n            return;\r\n        var requestType = 'refreshResource';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'params': params\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n\r\n    intersectFeatures: function (params) {\r\n\t\r\n\t   return govmap.authenticatedUser().then(function() \r\n        {\r\n           return govmap.getLayerDef(params).then(function(layerDef) {\r\n               \r\n                if (layerDef != null && layerDef != \"\") {\r\n                    params.whereClause = layerDef;\r\n                }\r\n    \r\n               \r\n                return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/IntersectsFeatures\", params);\r\n               \r\n            });\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t     //return govmap.authenticatedUser().then(function () {\r\n\t  // return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/IntersectsFeatures\", params);\r\n       });\r\n    },\r\n    intersectFeaturesByWhereClause: function (params) {\r\n        return govmap.authenticatedUser().then(function () {\r\n            return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/intersectFeaturesByWhereClause\", params);\r\n        });\r\n    },\r\n\t\t\r\n    getLayerDef: function (params) {\r\n        if (params.layerName == \"\")\r\n            return \"\";\r\n        var requestType = 'getLayerDef' + (Date.now() + Math.random()).toString();\r\n       // var requestType = 'getLayerDef';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'layerName': params.layerName,\r\n            'whereClause': \"whereClause\" in params ? params.whereClause : \"\"\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },/*\r\n    intersectFeatures: function (params) {\r\n        return govmap.authenticatedUser().then(function () {\r\n            return govmap.getLayerDef(params).then(function (layerDef) {\r\n                if (layerDef != null && layerDef != \"\") {\r\n                    params.whereClause = layerDef;\r\n                }\r\n                return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/IntersectsFeatures\", params);\r\n            });\r\n        });\r\n    },\r\n    intersectFeaturesByWhereClause: function (params) {\r\n        return govmap.getLayerDef(params).then(function (layerDef) {\r\n            if (layerDef != null && layerDef != \"\") {\r\n                params.whereClause = layerDef;\r\n            }\r\n            return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/intersectFeaturesByWhereClause\", params);\r\n        });\r\n    },\r\n\t*/\r\n    searchAndLocate: function (params) {\r\n        return govmap.authenticatedUser().then(function () {\r\n            return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/SearchAndLocate\", params);\r\n        });\r\n    },\r\n    setBackground: function (backgroundId) {\r\n        if (!govmap.validBackground(backgroundId)) {\r\n            console.log('background id must be a number!');\r\n            return;\r\n        }\r\n        var requestType = 'setBackground';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'backgroundId': backgroundId\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    setMapCursor: function (cursor) {\r\n        var requestType = 'setMapCursor';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'cursor': cursor\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    setDefaultTool: function () {\r\n        var requestType = 'setDefaultTool';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        govmap.dictSelectFeatures = [];\r\n        govmap.unbindEvent(govmap.internalClickEvents.GET_XY_CLICK);\r\n        govmap.unbindEvent(govmap.internalClickEvents.SELECTION);\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    showMeasure: function () {\r\n        var requestType = 'showMeasure';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, true);\r\n    },\r\n    showPrint: function (height, width) {\r\n        var requestType = 'showPrint';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'height': height,\r\n            'width': width\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    showExportMap: function () {\r\n        var requestType = 'showExportMap';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    closeBubble: function () {\r\n        var requestType = 'closeBubble';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    draw: function (type) {\r\n        var requestType = 'draw';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'type': type\r\n        };\r\n        return this.getMapRequest(request, true);\r\n    },\r\n    displayGeometries: function (data) {\r\n        var requestType = 'displayGeometries';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'data': data\r\n        };\r\n        return this.getMapRequest(request, true);\r\n    },\r\n    clearSelection: function () {\r\n        var requestType = 'clearSelection';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    clearDrawings: function () {\r\n        var requestType = 'clearDrawings';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    clearGeometriesByName: function (names) {\r\n        var requestType = 'clearGraphicsByName';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'names': names\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    clearGeometriesById: function (ids) {\r\n        var requestType = 'clearGraphicsById';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'ids': ids\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    zoomToXY: function (params) {\r\n        var requestType = 'zoomToXY';\r\n        var request = {\r\n            'requestType': requestType,\r\n        };\r\n        $.extend(request, params);\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    clearMapMarker: function () {\r\n        var requestType = 'clearMapMarker';\r\n        var request = {\r\n            'requestType': requestType,\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    getXY: function () {\r\n        govmap.setMapCursor(govmap.cursorType.TARGET);\r\n        return govmap.onEvent(govmap.internalClickEvents.GET_XY_CLICK);\r\n    },\r\n    geocode: function (params) {\r\n        return govmap.authenticatedUser().then(function () {\r\n            return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/Geocode\", params);\r\n        });\r\n    },\r\n    getFreeSearchResult: function (params) {\r\n        return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/GetFreeSearchResult\", params);\r\n    },\r\n    setDrawPointTooltip: function (params) {\r\n        var requestType = 'setDrawPointTooltip';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'tooltipText': params\r\n        };\r\n        return this.getMapRequest(request, true);\r\n    },\r\n    gpsOn: function () {\r\n        var requestType = 'gpsOn';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    gpsOff: function () {\r\n        var requestType = 'gpsOff';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    getGPSLocation: function () {\r\n        var requestType = 'getGPSLocation';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    setGpsMarker: function (gpsdata) {\r\n        var requestType = 'setGpsMarker';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'x': gpsdata.x,\r\n            'y': gpsdata.y,\r\n            'accuracy': gpsdata.accuracy\r\n        };\r\n        return this.getMapRequest(request, true);\r\n    },\r\n    removeGPSMarker: function () {\r\n        var requestType = 'removeGPSMarker';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    getInScaleVisibleLayers: function () {\r\n        var requestType = 'getInScaleVisibleLayers';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    identifyByXY: function (x, y) {\r\n        govmap.getInScaleVisibleLayers().then(function (layers) {\r\n            govmap.getMapTolerance().then(function (tolerance) {\r\n                var oLayers = [];\r\n                for (var i in layers) {\r\n                    oLayers.push({\r\n                        \"LayerType\": 8,\r\n                        \"LayerName\": layers[i][0]\r\n                    });\r\n                }\r\n                var params = {\r\n                    \"x\": x,\r\n                    \"y\": y,\r\n                    \"mapTolerance\": tolerance,\r\n                    \"layers\": oLayers\r\n                };\r\n                return govmap.post(govmap.getRestServiceRoot() + \"/Identify/IdentifyByXY\", params);\r\n            });\r\n        });\r\n    },\r\n    getMapTolerance: function () {\r\n        var requestType = 'getMapTolerance';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    setVisibleLayers: function (layersOn, layersOff) {\r\n        var requestType = 'setVisibleLayers';\r\n        var request = {\r\n            'requestType': requestType,\r\n            layersOn: layersOn,\r\n            layersOff: layersOff\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    setHeatLayer: function (params) {\r\n        var requestType = 'setHeatLayer';\r\n        var request = {\r\n            'requestType': requestType,\r\n            points: params.points,\r\n            options: params.options\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    removeHeatLayer: function () {\r\n        var requestType = 'removeHeatLayer';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    changeHeatLayerValueField: function (valueField) {\r\n        var requestType = 'changeHeatLayerValueField';\r\n        var request = {\r\n            'requestType': requestType,\r\n            valueField: valueField\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    getLayerData: function (params) {\r\n        return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/GetLayerEntitiesByXY\", { LayerName: params.LayerName, Radius: params.Radius, Point: params.Point });\r\n    },\r\n    getLayerRenderer: function (layers) {\r\n        return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/GetLayerRenderer\", layers);\r\n    },\r\n    getResourceLayersInfo: function (resourceName) {\r\n        return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/GetResourceLayersInfo\", resourceName);\r\n    },\r\n    addCustomBackground: function (params) {\r\n        var requestType = 'addCustomBackground';\r\n        var request = {\r\n            'requestType': requestType,\r\n            background: params\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    addAuthorizedBackground: function (bgId) {\r\n        var pointerThis = this;\r\n        return govmap.authenticatedUser().then(function () {\r\n            govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/AddAuthorizedBg\", { \"bgId\": bgId }).then(function (result) {\r\n                return pointerThis.addCustomBackground(result.data);\r\n            });\r\n        });\r\n    },\r\n    updateAuthData: function (authData) {\r\n        var requestType = 'updateAuthData';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'authData': authData\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    getLegend: function (params) {\r\n        var requestType = 'getLegend';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'params': params\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    addOpenSourceLayer: function (params) {\r\n        var requestType = 'addOpenSourceLayer';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'params': params\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    searchInLayer: function (params) {\r\n        var _this = this;\r\n        var pointerThis = this;\r\n        return govmap.authenticatedUser().then(function () {\r\n            govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/SelectionParams\", { \"layerName\": params.layerName, \"fieldName\": params.fieldName, \"fieldValues\": params.fieldValues, \"interfaceName\": params.interfaceName }).then(function (result) {\r\n                var requestType = 'searchInLayer';\r\n                var request = {\r\n                    'requestType': requestType,\r\n                    'selectionParams': result.data,\r\n                    'params': params\r\n                };\r\n                return _this.getMapRequest(request, false);\r\n            });\r\n        });\r\n    },\r\n    setMapSelection: function (params) {\r\n        var requestType = 'setMapSelection';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'params': params\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    intersectFeaturesLongGeom: function (params) {\r\n        return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/IntersectLongGeometry\", params);\r\n    },\r\n    _selectFeatures: function (interfaceName, wkt, tolerance, drawType, continous, defer) {\r\n        return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/SelectFeatures\", { \"wkt\": wkt, \"interfaceName\": interfaceName, \"tolerance\": tolerance })\r\n            .then(function (result) {\r\n            if (!result || !result.data || !result.data.Values) {\r\n                var err = {\r\n                    error: 'no data'\r\n                };\r\n                if (continous) {\r\n                    defer.notify(err);\r\n                }\r\n                else {\r\n                    defer.resolve(err);\r\n                }\r\n                return;\r\n            }\r\n            for (var key in result.data.Values) {\r\n                if (!govmap.dictSelectFeatures.hasOwnProperty(result.data.Values[key])) {\r\n                    govmap.dictSelectFeatures[key] = result.data.Values[key];\r\n                }\r\n            }\r\n            var lstObj = \"\";\r\n            var returnValues = [];\r\n            for (var k in govmap.dictSelectFeatures) {\r\n                lstObj += k + \",\";\r\n                returnValues.push(govmap.dictSelectFeatures[k]);\r\n            }\r\n            lstObj = lstObj.substring(0, lstObj.length - 1);\r\n            result.data.SelectionParams.filter = \"ObjectId in (\" + lstObj + \")\";\r\n            govmap.clearDrawings();\r\n            govmap.setMapSelection(result.data.SelectionParams);\r\n            if (continous) {\r\n                defer.notify({\r\n                    data: returnValues,\r\n                    selection: result.data.SelectionParams,\r\n                    limited: result.data.limitedResult\r\n                });\r\n            }\r\n            else {\r\n                defer.resolve({\r\n                    data: returnValues,\r\n                    selection: result.data.SelectionParams,\r\n                    limited: result.data.limitedResult\r\n                });\r\n            }\r\n        });\r\n    },\r\n    toWKT: function (geometry) {\r\n\tif(\"x\" in geometry  && \"y\" in geometry)\r\n\t{\r\n            geometry.type = \"point\";\r\n        }\r\n        switch (geometry.type) {\r\n            case \"extent\":\r\n                return govmap._extentToWKT(geometry);\r\n            case \"point\":\r\n                return govmap._pointToWKT(geometry);\r\n            case \"polyline\":\r\n                return govmap._polylineToWKT(geometry);\r\n            case \"polygon\":\r\n                return govmap._polygonToWKT(geometry);\r\n        }\r\n        return null;\r\n    },\r\n    _pointToWKT: function (geometry) {\r\n        return 'POINT(' + geometry.x + ' ' + geometry.y + ')';\r\n    },\r\n    _polylineToWKT: function (geometry) {\r\n        var coordSeparator = ' ';\r\n        var pntSeperator = ', ';\r\n        var path = geometry.paths[0];\r\n        var pntCount = path.length;\r\n        if (pntCount == 0)\r\n            return '';\r\n        var sb = new Array();\r\n        sb.push(path[0][0].toFixed(2) + coordSeparator + path[0][1].toFixed(2));\r\n        for (var idx = 1; idx < pntCount; idx++) {\r\n            sb.push(pntSeperator);\r\n            sb.push(path[idx][0].toFixed(2) + coordSeparator + path[idx][1].toFixed(2));\r\n        }\r\n        return \"LINESTRING(\" + sb.join(\"\") + \")\";\r\n    },\r\n    _polygonToWKT: function (geometry) {\r\n        var coordSeparator = ' ';\r\n        var pntSeperator = ', ';\r\n        var ring = geometry.rings[0];\r\n        var pntCount = ring.length;\r\n        if (pntCount == 0)\r\n            return '';\r\n        var sb = new Array();\r\n        sb.push(ring[0][0].toFixed(2) + coordSeparator + ring[0][1].toFixed(2));\r\n        for (var idx = 1; idx < pntCount; idx++) {\r\n            sb.push(pntSeperator);\r\n            sb.push(ring[idx][0].toFixed(2) + coordSeparator + ring[idx][1].toFixed(2));\r\n        }\r\n        if (ring[0][0] != ring[pntCount - 1][0] || ring[0][1] != ring[pntCount - 1][1]) {\r\n            sb.push(pntSeperator);\r\n            sb.push(ring[0][0].toFixed(2) + coordSeparator + ring[0][1].toFixed(2));\r\n        }\r\n        return \"POLYGON((\" + sb.join(\"\") + \"))\";\r\n    },\r\n    _extentToWKT: function (geometry) {\r\n        return 'POLYGON((' + geometry.xmin + ' ' + geometry.ymin + ','\r\n            + geometry.xmax + ' ' + geometry.ymin + ','\r\n            + geometry.xmax + ' ' + geometry.ymax + ','\r\n            + geometry.xmin + ' ' + geometry.ymax + ','\r\n            + geometry.xmin + ' ' + geometry.ymin + '))';\r\n    },\r\n    selectFeaturesOnMap: function (interfaceName, drawType, continous) {\r\n        if (continous === void 0) { continous = false; }\r\n        var pointerThis = this;\r\n        var defer = $.Deferred();\r\n        govmap.dictSelectFeatures = [];\r\n        if (typeof (drawType) === \"object\") {\r\n            govmap._selectFeatures(interfaceName, govmap.toWKT(drawType), 0, 0, false, defer);\r\n        }\r\n        else {\r\n            if (drawType == 0) {\r\n                govmap.setDrawPointTooltip(\"׳‘׳—׳¨ ׳‘׳׳₪׳”\");\r\n            }\r\n            govmap.draw(drawType).progress(function (e) {\r\n                govmap._selectFeatures(interfaceName, e.wkt, e.tolerance, drawType, continous, defer);\r\n                if (drawType == 0) {\r\n                    govmap.setDrawPointTooltip(\"׳׳—׳¥ ׳‘׳׳™׳§׳•׳ ׳”׳׳‘׳•׳§׳©\");\r\n                }\r\n            });\r\n        }\r\n        return defer.promise();\r\n    },\r\n    zoomToDrawing: function () {\r\n        var requestType = 'zoomToDrawing';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    filterLayers: function (params) {\r\n        var request = {\r\n            'requestType': 'filterLayers',\r\n            layerName: params.layerName,\r\n            whereClause: params.whereClause,\r\n            zoomToExtent: params.zoomToExtent\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    zoomIn: function () {\r\n        var request = {\r\n            'requestType': 'zoomIn'\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    zoomOut: function () {\r\n        var request = {\r\n            'requestType': 'zoomOut'\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    zoomToExtent: function (params) {\r\n        var request = {\r\n            'requestType': 'zoomToExtent',\r\n            xmin: params.xmin,\r\n            ymin: params.ymin,\r\n            xmax: params.xmax,\r\n            ymax: params.ymax\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    openTransporatationApp: function () {\r\n        var requestType = 'openTransporatationApp';\r\n        var request = {\r\n            'requestType': requestType\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    findLine: function (params) {\r\n        return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/FindLine\", params);\r\n    },\r\n    getSpecificLine: function (params) {\r\n        return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/GetSpecificLine\", params);\r\n    },\r\n    getStationArrivalTimes: function (params) {\r\n        if (!params.StartDate) {\r\n            params.StartDate = govmap.dateFormat(new Date());\r\n        }\r\n        if (!params.StartDepartureTime) {\r\n            params.StartDepartureTime = govmap.transportation.startDepartureTime;\r\n        }\r\n        if (!params.EndDate) {\r\n            var dateArray = params.StartDate.split(\"/\");\r\n            var startDate = new Date(dateArray[2], dateArray[1] - 1, dateArray[0]);\r\n            var endDate = startDate;\r\n            endDate.setDate(startDate.getDate() + govmap.transportation.numberOfDaysToAdd);\r\n            params.EndDate = govmap.dateFormat(endDate);\r\n        }\r\n        if (!params.EndDepartureTime) {\r\n            params.EndDepartureTime = govmap.transportation.endDepartureTime;\r\n        }\r\n        return govmap.post(govmap.getRestServiceRoot() + \"/Api/Controllers/GovmapApi/GetStationArrivals\", params);\r\n    },\r\n    zoomToTransportationLine: function (params) {\r\n        var requestType = 'zoomToTransportationLine';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'params': params\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    dateFormat: function (date) {\r\n        var dd = date.getDate();\r\n        var mm = date.getMonth() + 1;\r\n        var yyyy = date.getFullYear();\r\n        if (dd < 10) {\r\n            dd = '0' + dd;\r\n        }\r\n        if (mm < 10) {\r\n            mm = '0' + mm;\r\n        }\r\n        return dd + '/' + mm + '/' + yyyy;\r\n    },\r\n    projLocations: function (locations) {\r\n        var requestType = 'projFromITMToWGS';\r\n        var request = {\r\n            'requestType': requestType,\r\n            'params': locations\r\n        };\r\n        return this.getMapRequest(request, false);\r\n    },\r\n    getLocationsFromAdresses: function (addresses) {\r\n        return govmap.post(govmap.getRestServiceRoot() + '/Api/Controllers/GovmapApi/GetAdressesWgsCoord', addresses);\r\n    },\r\n    getLocations: function (params) {\r\n        if (params.locations)\r\n            return govmap.projLocations(params.locations);\r\n        else if (params.adresses)\r\n            return govmap.getLocationsFromAdresses(params.adresses);\r\n    },\r\n    getRoutingData: function (params) {\r\n        return govmap.getLocations(params)\r\n            .then(function (result) {\r\n            var url = 'http://13.73.176.212:8080/' + govmap.routing_type[params.routing_type] + '?json=';\r\n            var json = {\r\n                locations: result,\r\n                costing: govmap.costing[params.costing]\r\n            };\r\n            url += JSON.stringify(json);\r\n            return $.getJSON(url, function (routes) {\r\n                console.log(\"success\");\r\n            });\r\n        });\r\n    },\r\n    getSearchItem: function (params) {\r\n        return govmap.post(govmap.getRestServiceRoot() + '/AdvancedSearch/GetSearchItem', params);\r\n    },\r\n    getSearchComponentValues: function (params) {\r\n        return govmap.post(govmap.getRestServiceRoot() + '/AdvancedSearch/GetSearchComponentValues', params);\r\n    },\r\n    predefinedsearch: function (params) {\r\n        return govmap.post(govmap.getRestServiceRoot() + '/Search/PredefinedSearch', params);\r\n    }\r\n};\r\nwindow.govmap = govmap;\r\ngovmap.mapUrl = govmap.getScriptHostUrl();\r\ngovmap.urlWithProtocol = govmap.getUrlWithProtocol();\r\n$(window).on(\"message\", govmap.message_receiver);","import firebase from 'firebase';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCKxKgE1Mh7DauQBBhHAnJnnuIJaRLhj74\",\r\n    authDomain: \"orders-cd834.firebaseapp.com\",\r\n    databaseURL: \"https://orders-cd834.firebaseio.com\",\r\n    projectId: \"orders-cd834\",\r\n    storageBucket: \"orders-cd834.appspot.com\",\r\n    messagingSenderId: \"1099359698304\",\r\n    appId: \"1:1099359698304:web:1f290a07e5ad1c1740d565\",\r\n    measurementId: \"G-HL9D0JZH4N\"\r\n  };\r\n  firebase.initializeApp(firebaseConfig);\r\n  export const db = firebase.database();\r\n\r\n  ","import { Button, CircularProgress, FormControl, TextField, Typography } from '@material-ui/core';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport { Autocomplete } from '@material-ui/lab';\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport { TextField as TF } from 'formik-material-ui';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { number, object } from 'yup';\r\nimport getCityList from '../services/cityList';\r\nimport { db } from '../services/firebase';\r\nimport getStreets from \"../services/StreetsList\";\r\nimport Nominatim from 'nominatim';\r\n\r\n\r\n\r\n\r\n\r\nfunction sendTextToFireBase(data) {\r\n    if (data !== undefined) {\r\n        // console.log(data);\r\n        db.ref('orders').push(data);\r\n    }\r\n}\r\n\r\nexport default function OrderInputForum() {\r\n    var cityListO = []\r\n    //var streetListO = []\r\n    const [streetList, setStreetList] = useState([])\r\n    const [streetListO, setStreetListO] = useState([])\r\n    const [cityList, setCityList] = useState([])\r\n    const [citySelected, setCitySelected] = useState(false)\r\n    const initialValues = {\r\n        status: 'inWork',\r\n        orderSetDate: new Date(),\r\n        reciverName: \"\",\r\n        city: '',\r\n        street: '',\r\n        house: '',\r\n        lat: '',\r\n        lng: ''\r\n    };\r\n    useEffect(() => {\r\n        getCityList(setCityList)\r\n    }, []);\r\n    cityListO = cityList.map((option) => {\r\n        const firstLetter = option[0].toUpperCase();\r\n        return {\r\n            firstLetter: /[0-9]/.test(firstLetter) ? '0-9' : firstLetter,\r\n            title: option\r\n        };\r\n    })\r\n    useEffect(() => {\r\n        if (streetList !== undefined && streetList !== null) {\r\n            if (streetList.length > 0) {\r\n                setStreetListO(streetList.map((option) => {\r\n                    const firstLetter = option[0].toUpperCase();\r\n                    return {\r\n                        firstLetter: /[0-9]/.test(firstLetter) ? '0-9' : firstLetter,\r\n                        title: option\r\n                    };\r\n                }));\r\n            }\r\n        }\r\n\r\n    }, [streetList]);\r\n    const dibug = false\r\n    return (\r\n        <div>\r\n            <Typography color=\"primary\" variant=\"h3\">\r\n                אנא הכנס פרטי הזמנה\r\n            </Typography>\r\n            <Formik\r\n                initialValues={initialValues}\r\n                onSubmit={(data, { setSubmitting, resetForm }) => {\r\n                    setSubmitting(true)\r\n                    data.DDdate = String(data.orderSetDate.getDate()).padStart(2, 0)\r\n                    data.MMdate = String(data.orderSetDate.getMonth() + 1).padStart(2, 0)\r\n                    data.YYdate = data.orderSetDate.getFullYear()\r\n                    data.MMtime = data.orderSetDate.getMinutes()\r\n                    data.HHtime = data.orderSetDate.getHours()\r\n                    data.SStime = data.orderSetDate.getSeconds()\r\n                    var fulladdress = data.street + \" \" + data.house + \" \" + data.city\r\n                    Nominatim.search({ q: fulladdress }, function (err, opts, results) {\r\n                        console.log(\"err\");\r\n                        console.log(err);\r\n                        console.log(\"results\");\r\n                        console.log(results);\r\n                    })\r\n                    sendTextToFireBase(data)\r\n                    console.log(data);\r\n                    resetForm()\r\n                    setSubmitting(false)\r\n                }}\r\n                validateSchema={object({\r\n                    house: number().min(10),\r\n                    //reciverName: text()\r\n                })\r\n                }>\r\n                {({ values, isSubmitting, handleChange, setFieldValue }) => (\r\n                    <Form>\r\n                        <FormControl margin=\"normal\" required>\r\n                            <Field label=\"שם המקבל\" name=\"reciverName\" type=\"input\" variant=\"filled\" component={TF} />\r\n                            <Autocomplete\r\n                                id=\"city\"\r\n                                name=\"city\"\r\n                                options={cityListO}\r\n                                getOptionLabel={(option) => option.title}\r\n                                groupBy={(option) => option.firstLetter}\r\n                                //style={{ width: 300 }}\r\n                                onChange={(e, value) => {\r\n                                    //console.log(\"enter change city\");\r\n                                    //console.log(getStreets(value.title));\r\n                                    if (value) {\r\n                                        //console.log(\"setStreetList\");\r\n                                        getStreets(value.title, setStreetList)\r\n                                        //console.log(getStreetsFromAutoCom(value.title));\r\n                                        //streetListO = getStreetsFromAutoCom(value.title)\r\n                                        setCitySelected(true)\r\n                                    }\r\n                                    else {\r\n                                        setCitySelected(false)\r\n                                        setStreetListO([])\r\n                                    }\r\n                                    //console.log(streetList);\r\n                                    setFieldValue(\r\n                                        \"city\",\r\n                                        value !== null ? value.title : initialValues.city\r\n                                    );\r\n                                }}\r\n                                noOptionsText=\"לא נמצא חיפוש מתאים...\"\r\n                                renderInput={(params) => <TextField {...params} label=\"עיר\" name=\"city\" type=\"input\" variant=\"filled\" id=\"city\" />}\r\n                                loadingText=\"טוען...\" />\r\n                            <Autocomplete\r\n                                id=\"street\"\r\n                                name=\"street\"\r\n                                options={streetListO ? streetListO : [\"\"]}\r\n                                getOptionLabel={(option) => option.title}\r\n                                groupBy={(option) => option.firstLetter}\r\n                                //style={{ width: 300 }}\r\n                                onChange={(e, value) => {\r\n                                    //console.log(value);\r\n                                    setFieldValue(\r\n                                        \"street\",\r\n                                        value !== null ? value.title : initialValues.street\r\n                                    );\r\n                                }}\r\n                                noOptionsText={citySelected ? \"לא נמצא חיפוש מתאים...\" : \"לא נבחר עיר\"}\r\n                                renderInput={(params) => <TextField {...params} label=\"רחוב\" name=\"street\" type=\"input\" variant=\"filled\" id=\"street\" />}\r\n                                loadingText=\"טוען...\" />\r\n                            <Field label=\"מספר בית\" name=\"house\" type=\"input\" variant=\"filled\" component={TF} />\r\n                            <Button variant=\"contained\" color=\"primary\" disabled={isSubmitting} type=\"submit\" endIcon={<Icon style={{ transform: \"scaleX(-1)\" }}>send</Icon>}>{isSubmitting ? <CircularProgress size=\"1\" /> : \"שלח\"}</Button>\r\n                        </FormControl>\r\n                        {dibug ? <pre>{JSON.stringify(values, null, 2)}</pre> : null}\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n        </div >\r\n    )\r\n}","import $ from \"jquery\";\r\nexport default function getCityList(setArrayInState) {\r\n    const GovURL = \"https://data.gov.il/dataset/3fc54b81-25b3-4ac7-87db-248c3e1602de/resource/72bd51be-512b-4430-b2d2-f3295c90e569/download/72bd51be-512b-4430-b2d2-f3295c90e569.xml\"\r\n    var cityList = []\r\n\r\n    $.ajax(\r\n        GovURL, {\r\n        dataType: \"xml\", success: function (data) {\r\n            $(data)\r\n                .find(\"ROW\")\r\n                .each(function () {\r\n                    const city = $(this)\r\n                    const cityNameOBJ = city.find(\"שם_ישוב\")\r\n                    //console.log(cityNameOBJ[0].textContent);\r\n                    cityList.push(cityNameOBJ[0].textContent.trim())\r\n                })\r\n            //console.log(cityList);\r\n            setArrayInState(cityList)\r\n        }\r\n    }\r\n    )\r\n\r\n}","import $ from \"jquery\";\r\n\r\nexport default function getStreets(city, setArrayInState, params) {\r\n    if (city !== \"\") {\r\n        const action = \"datastore_search\"\r\n        //const test = \"https://data.gov.il/api/3/action/datastore_search\"\r\n        var data = {\r\n            resource_id: 'a7296d1a-f8c9-4b70-96c2-6ebb4352f8e3', // the resource id\r\n            limit: 3200, // get 5 results\r\n            q: city, // query for 'jones'\r\n            fields: \"שם_ישוב,שם_רחוב\",\r\n            sort: \"שם_רחוב\"\r\n        };\r\n        var StreetsList = []\r\n        //console.log(StreetsList);\r\n        //console.log(\"typeof array \"+typeof (StreetsList));\r\n        const request = `https://data.gov.il/api/3/action/${action}`\r\n        $.ajax({\r\n            url: request,\r\n            data: data,\r\n            dataType: 'json',\r\n            success: function (data) {\r\n                var streets = $(data.result)[0].records\r\n                /*\r\n                console.log(\"from api\");\r\n                console.log($(data.result)[0].records);\r\n                */\r\n                streets.forEach(street => {\r\n                    if (city.includes(street.שם_ישוב.trim())) {\r\n                        StreetsList.push(street.שם_רחוב.trim())\r\n                    }\r\n                });\r\n                if (StreetsList) {\r\n                    /*console.log(\"street\");\r\n                    console.log(StreetsList);\r\n                    console.log(typeof (StreetsList));\r\n                    console.log(StreetsList.length);*/\r\n                    setArrayInState(StreetsList)\r\n                }\r\n            }\r\n        })\r\n    }\r\n}","import { Card, CardContent, CardHeader } from '@material-ui/core/';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Map, Marker, Popup, TileLayer } from 'react-leaflet';\r\nimport getGeoCoding from \"../../services/nominatim.js\";\r\n\r\nexport default function OneOrder(props) {\r\n    const [position, setposition] = useState([0, 0])\r\n    const zoom = 13\r\n    useEffect(() => {\r\n        /*\r\n        var fulladdress = props.address.street + \" \" + props.address.house + \" \" + props.address.city\r\n        Nominatim.search({ q: fulladdress }, function (err, opts, results) {\r\n            console.log(err);\r\n            console.log(results);\r\n        })*/\r\n        getGeoCoding(props.address, setposition)\r\n        //console.log(position);\r\n    }, [props.address])\r\n\r\n    return (\r\n        <Card style={{ margin: \"10px\" }}>\r\n            <CardHeader\r\n                title={\"משלוח אל: \" + props.rcivername}\r\n                subheader={props.date}>\r\n            </CardHeader>\r\n            <CardContent>\r\n                <Map style={{ height: \"300px\" }} center={position} zoom={zoom}>\r\n                    <TileLayer\r\n                        attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                    />\r\n                    <Marker position={position}>\r\n                        <Popup>\r\n                            A pretty CSS3 popup. <br /> Easily customizable.\r\n                         </Popup>\r\n                    </Marker>\r\n                </Map>\r\n                <p>{position}</p>\r\n            </CardContent>\r\n        </Card>\r\n\r\n    )\r\n}","import $ from \"jquery\";\r\n\r\nexport default function getGeoCoding(params, setPostionInState) {\r\n    var house = params.house\r\n    var street = params.street\r\n    var city = params.city\r\n    if (checkIfAddressGood(params)) {\r\n        /*\r\n        console.log(\"params\");\r\n        console.log(params);\r\n        */\r\n        var latLng = [0, 0]\r\n        const request = `https://nominatim.openstreetmap.org/search?q=${house}+${street},+${city}&format=xml&polygon_geojson=1&addressdetails=1`\r\n        console.log(request);\r\n        $.ajax(\r\n            request, {\r\n            dataType: \"xml\",\r\n            success: function (data) {\r\n                /*\r\n                console.log(\"place\");\r\n                console.log($(data).find(\"place\"));\r\n                */\r\n                latLng[0] = $(data).find(\"place\").attr(\"lat\")\r\n                latLng[1] = $(data).find(\"place\").attr(\"lon\")\r\n                /*\r\n                console.log(\"latLng\");\r\n                console.log(latLng);*/\r\n                if (latLng !== null && latLng[0] !== undefined && latLng[1] !== undefined) {\r\n                    setPostionInState(latLng)\r\n                }\r\n            },\r\n            error: function (xhr, status, error) {\r\n                console.log(\"error\");\r\n                console.log(error);\r\n            }\r\n\r\n        })\r\n    }\r\n}\r\n\r\nfunction checkIfAddressGood(params) {\r\n    if (params.house !== \"\" && params.street !== \"\" && params.city !== \"\") {\r\n        return true\r\n    }\r\n    return false\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { db } from '../../services/firebase';\r\nimport { Grid} from '@material-ui/core';\r\nimport OneOrder from './OneOrder';\r\n\r\nvar ordersRef = db.ref('orders')\r\n\r\n\r\nexport default function OrderShow() {\r\n    const [ordersViewToShow, setordersViewToShow] = useState(null)\r\n    useEffect(() => {\r\n        getOrdersFromDB()\r\n    },[]);\r\n    function getOrdersFromDB() {\r\n        ordersRef.on('value', snap => {\r\n            var temp = snap.val()\r\n            var temp2 = Object.entries(temp)\r\n            setordersViewToShow(temp2.map((order) => {\r\n                var thisOrder = order[1]\r\n                //console.log(order[1]);\r\n                var dateformat = order[1].DDdate + \"/\" + order[1].MMdate + \"/\" + thisOrder.YYdate\r\n                var address = { street: thisOrder.street, house: thisOrder.house, city: thisOrder.city }\r\n                //console.log(address);\r\n                //console.log(dateformat);\r\n                return (\r\n                    <Grid key={counter} item xs={3}>\r\n                        <OneOrder key={counter++} rcivername={order[1].reciverName} date={dateformat} address={address} />\r\n                    </Grid>\r\n                )\r\n            })\r\n            )\r\n        })\r\n    }\r\n\r\n    var counter = 0\r\n    return (\r\n        <Grid container spacing={2}>\r\n            <Grid item>\r\n                <Grid container justify=\"center\" spacing={2}>\r\n                    {ordersViewToShow}\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n\r\n\r\n\r\n}","import Home from './Home';\r\nimport OrderPlace from './OrderPlace';\r\nimport Show from './Show';\r\n\r\n\r\nconst Routes = [\r\n    {\r\n        path: '/',\r\n        sidebarName: 'בית',\r\n        component: Home,\r\n        icon:\"home\"\r\n    },\r\n    {\r\n        path: '/Place-an-order',\r\n        sidebarName: 'הכנס הזמנה',\r\n        component: OrderPlace,\r\n        icon:\"input\"\r\n    },\r\n    {\r\n        path: '/Show',\r\n        sidebarName: 'צפה בהזמנות',\r\n        component: Show,\r\n        icon:\"inbox\"\r\n    },\r\n]\r\nexport default Routes\r\n","import React from 'react';\r\nimport ITMToWGS84 from '../services/ITMToWGS84';\r\nimport getGeoCode from '../services/GovMaps';\r\n\r\nexport default function Home() {\r\n    ITMToWGS84([211080,745685])\r\n    getGeoCode()\r\n    return (\r\n        <div>\r\n            home\r\n        </div>\r\n    )\r\n}","import { govmap } from './GovMapsAPI';\r\n\r\nexport default function getGeoCode() {\r\n    console.log(\"enter\");\r\n    govmap.geocode({ keyword: 'הרוקמים', type: govmap.geocodeType.AccuracyOnly }\r\n    ).then(function (response) {\r\n        console.log(response)\r\n    });\r\n}","import React from 'react';\r\nimport OrderInputForum from '../components/OrderInputForum';\r\n\r\nexport default function OrderPlace(){\r\n    return(\r\n        <div>\r\n            <OrderInputForum/>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport OrderShow from '../components/orders/OrderShow';\r\n\r\nexport default function Show() {\r\n    return (\r\n        <div>\r\n            <OrderShow />\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\n\r\nexport default function Home() {\r\n    return (\r\n        <div>\r\n            error\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport Routes from '../pages/Routes';\r\nimport Error from '../pages/Error';\r\n\r\nexport default function Body() {\r\n    return (\r\n        <div>\r\n            <Switch>\r\n                {Routes.map((prop) => {\r\n                    //console.log(prop);\r\n                    return (\r\n                        <Route path={prop.path} exact component={prop.component} key={prop.path}>\r\n                            <prop.component />\r\n                        </Route>\r\n                    )\r\n                })}\r\n                <Route component={Error} />\r\n            </Switch>\r\n\r\n        </div>\r\n    )\r\n}","import { Divider, List, ListItemIcon, ListItemText, MenuItem, MenuList, Typography } from '@material-ui/core';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport Routes from '../pages/Routes';\r\n\r\n\r\nexport default function Menu() {\r\n    const activeRoute = (routeName) => {\r\n        return window.location.pathname === routeName ? true : false;\r\n    }\r\n    return (\r\n        <div>\r\n            <div>\r\n                <Typography variant='inherit' display=\"block\" style={{ textAlign: \"center\", fontSize: \"25px\" }}>תפריט ראשי</Typography>\r\n            </div>\r\n            <Divider variant=\"middle\" />\r\n\r\n            <List>\r\n                <MenuList>\r\n                    {Routes.map((prop, key) => {\r\n                        return (\r\n                            <NavLink to={prop.path} style={{ textDecoration: 'none' }} key={key}>\r\n                                <MenuItem selected={activeRoute(prop.path)}>\r\n                                    <ListItemIcon ><Icon>{prop.icon}</Icon></ListItemIcon>\r\n                                    <ListItemText primary={prop.sidebarName} style={{ color: \"black\" }} />\r\n                                </MenuItem>\r\n                            </NavLink>\r\n                        )\r\n                    })}\r\n                </MenuList>\r\n            </List>\r\n        </div>\r\n    )\r\n}","import { AppBar, Button, Drawer, IconButton, Toolbar, Typography } from '@material-ui/core';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport React from 'react';\r\nimport Menu from './Menu';\r\n\r\n\r\nexport default function NavBar() {\r\n    const [menuDrawerState, setMenuDrawerState] = React.useState(false);\r\n\r\n    const toggleDrawer = (open) => (event) => {\r\n        //console.log(event);\r\n        if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\r\n            return;\r\n        }\r\n\r\n        setMenuDrawerState(open);\r\n    };\r\n    return (\r\n        <AppBar position=\"static\">\r\n            <Toolbar>\r\n                <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={toggleDrawer(true)}>\r\n                    <Icon>menu</Icon>\r\n                </IconButton>\r\n                <Typography variant=\"h6\" >\r\n                    מערך המשלוחים\r\n          </Typography>\r\n                <Drawer open={menuDrawerState} onClose={toggleDrawer(false)}>\r\n                    <div\r\n                        role=\"presentation\"\r\n                        onClick={toggleDrawer(false)}\r\n                        onKeyDown={toggleDrawer(false)}\r\n                    >\r\n                        <Menu />\r\n                    </div>\r\n                </Drawer>\r\n                <Button color=\"inherit\" style={{ fontWeight: \"bold\" }} >התחבר</Button>\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n","import { jssPreset, StylesProvider, ThemeProvider } from '@material-ui/core/styles';\nimport { create } from 'jss';\nimport rtl from 'jss-rtl';\nimport React from 'react';\nimport './App.css';\nimport MyTheme from './assets/MyTheme';\nimport Body from './components/Body';\nimport NavBar from './components/NavBar';\nconst jss = create({ plugins: [...jssPreset().plugins, rtl()] });\n\nfunction App() {\n\n  return (\n\n    <ThemeProvider theme={MyTheme}>\n      <StylesProvider jss={jss}>\n        <div className=\"App\" dir=\"rtl\">\n          <NavBar />\n          <Body />\n        </div>\n      </StylesProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom'\n\n\nReactDOM.render(\n  <BrowserRouter>\n      <App />\n  </BrowserRouter>\n\n  ,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}